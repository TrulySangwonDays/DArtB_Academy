# 9장. 가설검정의 주의점

### 9.1 재현성
- 재현성(reporducibility)누가 언제 어디서 실험하더라도, 조건이 동일하다면 동일한 결과를 얻을 수 있어야 한다.
- 재현성이 없다는 것은 “원래 논문의 주장이 잘못되었을 가능성” 시사
- 재현 불가능의 원인?
    - 실험 조건을 동일하게 조성하기 어려움
    - 가설검정 사용 방법에 따라 p값이 0.05보다 작거나 크게 조작 가능 → p해킹
    - 논문 게재 과정에서 “출판 편향” 문제 생길 가능성도 있음

### 9.2 가설검정의 문제점
- 가설검정 원리와 p값을 이해하지 못한 채 사용하는 사람이 많음
- 알파=0.05 사용해 통계적으로 유의미한 결과 중, 실제로는 귀무가설이 옳았을 비율이 뜻밖에 높다 → 최근에는 알파를 0.005로 하자고 제안하는 논문도 존재
- 이후 동향에 따라 새로운 알파로 바뀔 가능성도 있음


---
피셔류 검정과 네이만-피어슨류 검정
- 피셔류 검정 : 귀무가설이 옳을 때 관찰한 데이터 이상으로 극단적인 값을 얻을 확율인 p값을 계산하고, 귀무가설과 관찰한 값의 괴리 정도를 평가
- 네이만-피어슨류 검정 : p값이 유의수준 알파 미만인가 이상인가에만 주목하여, 가설 기각/채택이라는 결론을 내림(단, 미리 검출하고자 하는 효과크기를 정하고, 설정한 알파와 베타에 따라 필요한 표본크기n을 결정해야 함)
- 표본크기 n 정할 때 중요한 점 : n이 커지면 p값은 작아지므로 검출하고자 하는 효과크기를 사전에 설정하고 n을 설계해야 함

---
효과크기

- 얼마만큼의 효과가 있는지 나타내는 효과크기(effect size)도 함께 표기하는 것이 좋음
- 어떤 현상을 보고한 여러 논문을 통합해, 결과를 종합적으로 평가하는 방법인 “메타분석”에서도 중요함


---
베이즈 인수

- 귀무가설 판단을 보류하게 되는 문제점에 대한 해결책 중 하나
- 특징 :
    - 귀무가설과 대립가설 간 비대칭성 문제는 베이즈 인수에 해당하지 않음
    - 베이즈 인수가 특정 값이 될 때까지 n을 늘린다는, 순차적인 갱신이 가능하다는 이점
- 주의점 :
    - 베이즈 인수는 두 가설의 상대적 비교일 뿐, 한쪽 가설이 나쁜 것만으로 베이즈 인수가 큰 값이 될 수도 있음 → 사후예측분포를 평가하는 사후예측점검을 수행해야 함
    - 베이즈 인수는 파라미터 세타의 사전분포에 영향을 받음
    - 주변 가능도를 구할 때는 모형으로 설정한 파라미터로 평균화하기 위한 적분 계산이 필요


---
좋은 가설을 세워야 함 : 진실을 말하는 가설!




### 9.3 p-해킹

p-해킹 : 의도하든, 의도하지 않든 p값을 원하는 방향으로 조작하는 행위

- 결과를 보며 표본크기를 늘려서는 안 됨
    - n을 늘려가며 p값을 확인해보면 오르락내리락 하다가 어느 순간 0.05를 밑도는 순간이 발생한다.
- 마음에 드는 해석만 보고해서는 안 됨
    - HARKing(Hypothesis After the Results are Known) 데이터를 얻어 결과를 보고 나서 가설을 만드는 행위 → 재현성 저하로 이어짐

---
p-해킹 예방 노력들
- 가설검증형 연구
    - 사전 등록 : 연구를 실시하기 전에 가설과 실험설계, 분석방법 등의 연구 계획을 등록하는 것 → HARKing을 막을 수 있음
- p값 관련 문제 정리
    - p값을 제대로 이해하자
    - 가설검정 반복 시 다중성 문제 → 위양성 증가 이해
    - 탐색형과 가설검정형 연구의 차이 이해
    - 실시한 실험이나 해석은 제대로 보고하기
    - 재현성이 있는지 염두에 둠, 재실험으로 확인
    - 좋은 가설 세워야 함






# 10장. 인과와 상관

### 10.1 인과와 상관
- 인과관계 : 원인과 결과의 관계
- 상관관계 : “관련성”(association). 어떤 특정한 조합이 일어나기 쉽고, 학률변수 사이가 독립이 아니라는 것.


---
허위상관

- Spurious correlation
- 인과관계 X , 상관관계 O

한편, 인과관계가 있으면 그 사이에 상관관계도 있을 거라 생각하기 쉬운데, 상관관계가 없을 때도 있음


---
인과관계 알면 할 수 있는 일

- “개입” 가능 : 윈인 변수를 변화시킴으로써(개입), 결과 변수를 바꿀 수 있다


---
상관관계를 알면 할 수 있는 일

- 2개 변수 X, Y 사이의 관련성이므로, 한쪽 변수로부터 또 다른 변수를 “예측”할 수 있음


---
사례로 보는 인과/상관관계 주의

- 허위상관 : 아이스크림매출-수영장익사사고
- 중첩요인 : 초콜릿소비량-노벨상수상자수
- 우연히 생긴 상관 : 수많은 변수를 마구잡이로 해석하면 통계적으로 유의미한 결과를 얻을 수도 있다…






### 10.2 무작위 통제 실험

- 변수 X에서 변수 Y로의 인과효과를 추정하는 가장 강력한 방법
- 알고자 하는 요인인 변수 X에 표본을 무작위로 할당하고 개입 실험을 수행한 다음, 변수 Y와 비교하는 방법 (feat. AB테스트)
- 중첩요인을 확인하지 않더라도, 그 효과를 무작위를 이용하여 무효화할 수 있으므로, 알고자 하는 변수의 효과만 추정 가능하기 때문


---
인과추론의 근본문제 : ex) 다이어트 한 세계의 몸무게(y)와 다이어트 안 한 세계의 몸무게(y) 양쪽을 관찰할 수 없음

---
- 무작위 통제 실험의 이론적 배경
    - 개인 수준이 아닌 집단 수준을 생각하여, 인과의 평균적인 효과를 고려함
- 선택편향 : 관측 가능한 ‘타우’는 원래 알고자 하는 효과 ‘타우’에 편향이 더해진 값이 됨
    - 중첩요인의 존재가 선택편향을 발생시키기에 인과관계를 밝히기 어려웠던 것






### 10.3 통계적 인과 추론

- 무작위 통제 실험처럼 실험 없이, 실제 데이터에서 인과효과를 추정한다.
- 인과효과의 추정 방법 및 통계적 인과 탐색이라는 인과구조의 지정 방법 개발이 활발히 진행
- 다중회귀
    - 편회귀계쑤 b는 다른 설명변수와의 상관을 제거한 x_i의 영향으로 해석 가능→인과효과
- 층별 해석
    - 중첩요인을 기준으로 데이터를 몇 가지 그룹(층)으로 나누어, 각 층 안에서 중첩요인의 효과를 가능한 작계 하는 방법
- 경향 점수 짝짓기
    - 원인변수=0인 집단과 원인변수=1인 집단에서 비슷한 중첩요인을 가진 데이터를 골라 쌍으로 만드는 방법
- 이중차분법(DID, Difference In Differences)
    - 시간 축을 도입, 집단 간 차이에 대해 다시 한번 처리 전후의 차분을 취함으로써 인과효과를 추정할 수 있음
